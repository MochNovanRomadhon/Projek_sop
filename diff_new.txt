diff --git a/app/Filament/Pengusul/Resources/SopResource.php b/app/Filament/Pengusul/Resources/SopResource.php
index 2e75761..53a65ae 100644
--- a/app/Filament/Pengusul/Resources/SopResource.php
+++ b/app/Filament/Pengusul/Resources/SopResource.php
@@ -68,14 +68,9 @@ public static function table(Table $table): Table
     {
         return $table
             ->columns([
-                Tables\Columns\TextColumn::make('judul')->label('Nama SOP')->searchable()->wrap()->weight('bold')->description(fn (Sop $record) => $record->nomor_sk),
+                Tables\Columns\TextColumn::make('nomor_sk')->label('No SK'),    
+                Tables\Columns\TextColumn::make('judul')->label('Nama SOP')->searchable()->wrap()->weight('bold'),
                 Tables\Columns\TextColumn::make('jenis')->badge()->color('info'),
-                
-                Tables\Columns\TextColumn::make('tanggal_berlaku')
-                    ->label('Tgl Pengesahan')
-                    ->date('d M Y')
-                    ->sortable(),
-
                 // [LOGIKA WARNING]
                 Tables\Columns\TextColumn::make('expired_at')
                     ->label('Berlaku Sampai')
@@ -113,7 +108,7 @@ public static function table(Table $table): Table
                     ->formatStateUsing(fn (string $state): string => match ($state) {
                         'Disetujui' => 'Aktif',
                         'Menunggu Verifikasi' => 'Proses Verifikasi',
-                        'Ditolak' => 'Ditolak (Perlu Revisi)',
+                        'Ditolak' => 'Ditolak',
                         'Review' => 'Review Tahunan',
                         'Riwayat' => 'Riwayat',
                         default => $state,
@@ -129,7 +124,6 @@ public static function table(Table $table): Table
                     ->visible(fn (Sop $record) => self::needsReview($record))
                     ->url(fn (Sop $record) => Pages\ReviewSop::getUrl(['record' => $record])),
 
-                Tables\Actions\ViewAction::make(),
                 
                 Tables\Actions\Action::make('revisi')
                     ->label('Perbaiki')
@@ -141,7 +135,8 @@ public static function table(Table $table): Table
                 Tables\Actions\Action::make('edit_custom')
                     ->label('Ajukan Perubahan')
                     ->color('info')
-                    ->icon('heroicon-o-pencil')
+                    ->button()
+                    ->icon('heroicon-o-pencil-square')
                     ->url(fn (Sop $record) => Pages\EditSop::getUrl(['record' => $record]))
                     ->visible(fn (Sop $record) => in_array($record->status, ['Draft', 'Disetujui']) && !self::needsReview($record)),
 
@@ -217,9 +212,16 @@ public static function infolist(Infolist $infolist): Infolist
                     ->state(fn ($record) => Carbon::parse($record->tanggal_berlaku)->addYears(3)->format('d M Y'))
                     ->badge()->color('danger'),
                 Infolists\Components\TextEntry::make('status')->badge()->color('success'),
-                Infolists\Components\TextEntry::make('file_path')->label('File')->url(fn ($record) => asset('storage/' . $record->file_path))->openUrlInNewTab()->color('primary'),
-            ])->columns(2)
-        ]);
+            ])->columns(2),
+            Infolists\Components\Section::make('Preview Dokumen')
+             ->schema([
+             Infolists\Components\ViewEntry::make('file_path') // Nama kolom di database
+            ->label('') // Kosongkan label agar tampilan penuh
+            ->view('filament.infolists.pdf-preview') // Lokasi file blade yang akan kita buat
+            ->columnSpanFull(),
+        ])
+        ->collapsible(),
+                ]);
     }
 
     public static function sendNotificationToVerifikator($record, $type)
diff --git a/app/Filament/Pengusul/Resources/SopResource/Pages/CreateSop.php b/app/Filament/Pengusul/Resources/SopResource/Pages/CreateSop.php
index 06e18f9..83fa0f2 100644
--- a/app/Filament/Pengusul/Resources/SopResource/Pages/CreateSop.php
+++ b/app/Filament/Pengusul/Resources/SopResource/Pages/CreateSop.php
@@ -34,4 +34,9 @@ protected function mutateFormDataBeforeCreate(array $data): array
         
         return $data;
     }
+
+    protected function getCreatedNotificationTitle(): ?string
+    {
+        return 'SOP berhasil diajukan!';
+    }
 }
\ No newline at end of file
diff --git a/app/Filament/Pengusul/Resources/SopResource/Pages/EditSop.php b/app/Filament/Pengusul/Resources/SopResource/Pages/EditSop.php
index 8fe446e..4e9b9c0 100644
--- a/app/Filament/Pengusul/Resources/SopResource/Pages/EditSop.php
+++ b/app/Filament/Pengusul/Resources/SopResource/Pages/EditSop.php
@@ -19,6 +19,10 @@ protected function getHeaderActions(): array
         ];
     }
 
+    protected function getSavedNotificationTitle(): ?string
+    {
+        return 'Perubahan berhasil disimpan';
+    }
     // [BARU] Mengubah nama tombol "Save changes" menjadi "Simpan Perubahan"
     protected function getSaveFormAction(): \Filament\Actions\Action
     {
@@ -48,7 +52,7 @@ protected function afterSave(): void
             
             Notification::make()
                 ->title('Perubahan Diajukan')
-                ->body('Dokumen SOP kini berstatus "Menunggu Verifikasi" untuk diperiksa ulang.')
+                ->body('Dokumen SOP diajkuakn untuk diproses verifikasi.')
                 ->success()
                 ->send();
         }
diff --git a/app/Filament/Pengusul/Resources/SopResource/Pages/ListSops.php b/app/Filament/Pengusul/Resources/SopResource/Pages/ListSops.php
index 89885b2..4cf555b 100644
--- a/app/Filament/Pengusul/Resources/SopResource/Pages/ListSops.php
+++ b/app/Filament/Pengusul/Resources/SopResource/Pages/ListSops.php
@@ -30,10 +30,5 @@ protected function getHeaderActions(): array
         ];
     }
 
-    public function getSubheading(): ?string
-    {
-        $user = auth()->user();
-        $unitName = $user->unit->nama ?? '-';
-        return "Unit Kerja: {$unitName}";
-    }
+    
 }
\ No newline at end of file
diff --git a/app/Filament/Verifikator/Resources/SopResource.php b/app/Filament/Verifikator/Resources/SopResource.php
index 86b5997..5a4c531 100644
--- a/app/Filament/Verifikator/Resources/SopResource.php
+++ b/app/Filament/Verifikator/Resources/SopResource.php
@@ -14,7 +14,7 @@
 use Filament\Tables\Filters\SelectFilter; 
 use Illuminate\Support\HtmlString;
 use Illuminate\Database\Eloquent\Builder;
-
+use Illuminate\Support\Facades\Storage;
 class SopResource extends Resource
 {
     protected static ?string $model = Sop::class;
@@ -43,9 +43,10 @@ public static function infolist(Infolist $infolist): Infolist
                     ->schema([
                         Infolists\Components\TextEntry::make('judul')->label('Nama SOP'),
                         Infolists\Components\TextEntry::make('nomor_sk')->label('Nomor SK'),
-                        Infolists\Components\TextEntry::make('unit.nama')->label('Unit Pengusul'),
+                        Infolists\Components\TextEntry::make('unit.nama')->label('Unit'),
+                        Infolists\Components\TextEntry::make('unit.direktorat.nama')->label('direktorat'),
                         Infolists\Components\TextEntry::make('jenis')->badge()->color('info'),
-                        Infolists\Components\TextEntry::make('tanggal_berlaku')->date('d F Y'),
+                        Infolists\Components\TextEntry::make('tanggal_berlaku')->label('Tanggal Pengesahan')->date('d M Y'),
                         
                         // [PERBAIKAN TAMPILAN STATUS DI VIEW DETAIL]
                         Infolists\Components\TextEntry::make('status')->badge()
@@ -62,19 +63,15 @@ public static function infolist(Infolist $infolist): Infolist
                             }),
                     ])->columns(3),
 
-                Infolists\Components\Section::make('Preview File PDF')
-                    ->schema([
-                        Infolists\Components\TextEntry::make('file_path')
-                            ->label('')
-                            ->formatStateUsing(fn ($state) => new HtmlString('
-                                <iframe src="'.asset('storage/'.$state).'" width="100%" height="600px" style="border: 1px solid #ddd; border-radius: 8px;">
-                                    Browser Anda tidak mendukung preview PDF. 
-                                    <a href="'.asset('storage/'.$state).'" target="_blank">Download PDF</a>
-                                </iframe>
-                            '))
-                            ->columnSpanFull(),
-                    ]),
-            ]);
+        Infolists\Components\Section::make('Preview Dokumen')
+            ->schema([
+                Infolists\Components\ViewEntry::make('file_path') // Nama kolom di database
+                    ->label('') // Kosongkan label agar tampilan penuh
+                    ->view('filament.infolists.pdf-preview') // Lokasi file blade yang akan kita buat
+                    ->columnSpanFull(),
+                ])
+                ->collapsible(),
+                        ]);
     }
 
     public static function table(Table $table): Table
@@ -83,9 +80,10 @@ public static function table(Table $table): Table
             ->columns([
                 Tables\Columns\TextColumn::make('nomor_sk')->label('No SK'),
                 Tables\Columns\TextColumn::make('judul')->label('Nama SOP')->searchable()->wrap(),
-                Tables\Columns\TextColumn::make('tanggal_berlaku')->date('d M Y'),
-                Tables\Columns\TextColumn::make('unit.nama')->label('Unit'),
                 Tables\Columns\TextColumn::make('jenis')->badge()->color('info'),
+                Tables\Columns\TextColumn::make('tanggal_berlaku')->label('Tanggal Pengesahan')->date('d M Y'),
+                Tables\Columns\TextColumn::make('unit.direktorat.nama')->label('Direktorat'),
+                Tables\Columns\TextColumn::make('unit.nama')->label('Unit'),
                 
                 // [PERBAIKAN TAMPILAN STATUS DI TABEL]
                 Tables\Columns\TextColumn::make('status')
diff --git a/app/Filament/Verifikator/Resources/SopResource/Pages/ViewSop.php b/app/Filament/Verifikator/Resources/SopResource/Pages/ViewSop.php
index 529151e..9fe643f 100644
--- a/app/Filament/Verifikator/Resources/SopResource/Pages/ViewSop.php
+++ b/app/Filament/Verifikator/Resources/SopResource/Pages/ViewSop.php
@@ -23,6 +23,9 @@ protected function getHeaderActions(): array
                 ->color('danger')
                 ->icon('heroicon-o-x-circle')
                 ->visible(fn (Sop $record) => $record->status === 'Menunggu Verifikasi')
+                ->modalHeading('Tolak Pengajuan SOP')
+                ->modalDescription('Silakan berikan alasan penolakan agar pengusul dapat memperbaikinya.')
+                ->modalSubmitActionLabel('Kirim Penolakan')
                 ->form([
                     Forms\Components\Textarea::make('catatan_revisi')
                         ->label('Catatan Revisi (Wajib Diisi)')
@@ -59,7 +62,9 @@ protected function getHeaderActions(): array
                 ->color('success')
                 ->icon('heroicon-o-check-circle')
                 ->visible(fn (Sop $record) => $record->status === 'Menunggu Verifikasi')
-                ->requiresConfirmation()
+                ->modalHeading('Konfirmasi Persetujuan SOP') // Judul di atas
+                ->modalDescription('Apakah Anda yakin dokumen ini sudah valid?') // Tulisan di bawah judul
+                ->modalSubmitActionLabel('Terima ') // Tulisan di tombol konfirmasi
                 ->action(function (Sop $record) {
                     // 1. Update Status
                     $record->update([
@@ -75,7 +80,7 @@ protected function getHeaderActions(): array
 
                     Notification::make()
                         ->title('Selamat! SOP Diterima')
-                        ->body("SOP '{$record->judul}' telah disetujui dan statusnya kini Aktif.")
+                        ->body("SOP '{$record->judul}' telah disetujui.")
                         ->success() // Warna Hijau
                         ->icon('heroicon-o-sparkles')
                         ->sendToDatabase($pengusul);
diff --git a/app/Filament/Verifikator/Resources/UnitResource/RelationManagers/SopsRelationManager.php b/app/Filament/Verifikator/Resources/UnitResource/RelationManagers/SopsRelationManager.php
index affc51c..04c820a 100644
--- a/app/Filament/Verifikator/Resources/UnitResource/RelationManagers/SopsRelationManager.php
+++ b/app/Filament/Verifikator/Resources/UnitResource/RelationManagers/SopsRelationManager.php
@@ -2,8 +2,8 @@
 
 namespace App\Filament\Verifikator\Resources\UnitResource\RelationManagers;
 
-use App\Filament\Verifikator\Resources\UnitResource; // Import ini penting untuk URL
-use App\Filament\Verifikator\Resources\SopResource\Pages\ViewSop; // Import View SOP Page
+use App\Filament\Verifikator\Resources\UnitResource;
+use App\Filament\Verifikator\Resources\SopResource;
 use Filament\Resources\RelationManagers\RelationManager;
 use Filament\Tables;
 use Filament\Tables\Table;
@@ -17,30 +17,43 @@ class SopsRelationManager extends RelationManager
 
     protected static ?string $icon = 'heroicon-o-document-text';
 
+    // [PENTING] Ini wajib ada untuk fitur pencarian global relation manager
+    protected static ?string $recordTitleAttribute = 'judul';
+
     public function table(Table $table): Table
     {
         return $table
-            // 1. FILTER: Jangan tampilkan Riwayat di sini
+            ->description(fn () => 'Unit: ' . $this->getOwnerRecord()->nama)
+
+            // [SOLUSI] Hapus recordUrl sementara.
+            // Penyebab error "layar hitam" biasanya karena route 'view' belum ada saat baris ini diproses.
+            // ->recordUrl(fn ($record) => SopResource::getUrl('view', ['record' => $record]))
+
+            // Filter: Jangan tampilkan Riwayat
             ->modifyQueryUsing(fn (Builder $query) => $query->where('status', '!=', 'Riwayat'))
             
-            // 2. KOLOM (Definisikan manual agar tidak konflik)
             ->columns([
-                Tables\Columns\TextColumn::make('judul')
+                Tables\Columns\TextColumn::make('judul') 
                     ->label('Nama SOP')
-                    ->searchable()
-                    ->wrap(),
+                    ->searchable() 
+                    ->sortable()
+                    ->wrap()
+                    ->weight('bold'),
                 
                 Tables\Columns\TextColumn::make('nomor_sk')
                     ->label('No. SK')
-                    ->searchable(),
+                    ->searchable()
+                    ->sortable(),
 
                 Tables\Columns\TextColumn::make('jenis')
                     ->badge()
-                    ->color('info'),
+                    ->color('info')
+                    ->sortable(),
 
                 Tables\Columns\TextColumn::make('tanggal_berlaku')
                     ->date('d M Y')
-                    ->label('Tgl Berlaku'),
+                    ->label('Tgl Berlaku')
+                    ->sortable(),
 
                 Tables\Columns\TextColumn::make('status')
                     ->badge()
@@ -49,17 +62,35 @@ public function table(Table $table): Table
                         'Menunggu Verifikasi' => 'warning',
                         'Ditolak' => 'danger',
                         default => 'gray',
+                    })
+                    ->formatStateUsing(fn (string $state): string => match ($state) {
+                        'Disetujui' => 'Aktif',
+                        default => $state,
                     }),
             ])
-            
-            // 3. TOMBOL HEADER (Disini letak tombol Riwayat)
+            ->filters([
+                Tables\Filters\SelectFilter::make('status')
+                    ->options([
+                        'Menunggu Verifikasi' => 'Menunggu Verifikasi',
+                        'Disetujui' => 'Aktif',
+                        'Ditolak' => 'Ditolak',
+                    ]),
+            ])
             ->headerActions([
                 Tables\Actions\Action::make('riwayat')
-                    ->label('Lihat Riwayat SOP') // Label Tombol
+                    ->label('Riwayat SOP')
                     ->icon('heroicon-o-archive-box')
                     ->color('gray')
-                    // Arahkan ke halaman ListRiwayatSops milik Unit tersebut
-                    ->url(fn () => UnitResource::getUrl('riwayat', ['record' => $this->getOwnerRecord()])),
+                    // Gunakan URL '#' agar aman dan tidak crash saat refresh tabel
+                    ->url('#') 
+                    ->openUrlInNewTab(false),
+            ])
+            ->actions([
+                // [SOLUSI] Gunakan ViewAction default (Modal Popup).
+                // Hapus ->url(...) agar Filament tidak memaksa mencari route page yang mungkin belum ada.
+                // Ini akan membuka detail SOP dalam modal, yang jauh lebih stabil.
+                Tables\Actions\ViewAction::make()
+                    ->label('Lihat'),
             ]);
     }
 }
\ No newline at end of file
